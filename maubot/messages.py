"""–í—Å–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –±–æ—Ç–µ, –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤ –æ–±—â–µ–º –¥–æ—Å—Ç—É–ø–µ.

–†–∞–∑–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º.
–ó–¥–µ—Å—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è, —Ç–∞–∫ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ.
"""

from datetime import datetime

from mau.game import UnoGame
from mau.messages import get_room_players
from maubot.config import config

# –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ /help
# –ù–µ–º–Ω–æ–≥–æ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ –±–æ—Ç–∞ –∏ –∫–∞–∫ –∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è
HELP_MESSAGE = (
    "üç∞ <b>–¢—Ä–∏ –ø—Ä–æ—Å—Ç—ã—Ö —à–∞–≥–∞ —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –≤–µ—Å–µ–ª—å–µ</b>!\n\n"
    "1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –≤–∞—à—É –≥—Ä—É–ø–ø—É.\n"
    "2. –í –≥—Ä—É–ø–ø–µ —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É —á–µ—Ä–µ–∑ /game –∏–ª–∏ –∑–∞–π–¥–∏—Ç–µ –≤ –Ω–µ—ë —á–µ—Ä–µ–∑ /join.\n"
    "3. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –≤—Å–µ —Å–æ–±—Ä–∞–ª–∏—Å—å, –Ω–∞—á–∏–Ω–∞–π—Ç–µ –∏–≥—Ä—É –ø—Ä–∏ –ø–æ–º–æ—â–∏ /start!\n"
    "4. –í–≤–µ–¥–∏—Ç–µ <code>@mili_maubot</code> –≤ —á–∞—Ç–µ –∏–ª–∏ –∂–º—è–∫–Ω–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Ö–æ–¥–∞.\n"
    "–ó–¥–µ—Å—å –≤—Å–µ –≤–∞—à–∏ –∫–∞—Ä—Ç—ã, –∞ –µ—â—ë –∫–Ω–æ–ø–∫–∏ —á—Ç–æ–±—ã –≤–∑—è—Ç—å –∫–∞—Ä—Ç—ã –∏ "
    "–ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã.\n"
    "<b>–°–µ—Ä—ã–µ</b> –∫–∞—Ä—Ç—ã –≤—ã –ø–æ–∫–∞ –Ω–µ –º–æ–∂–µ—Ç–µ —Ä–∞–∑—ã–≥—Ä–∞—Ç—å.\n"
    "–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ–¥–∏–Ω –∏–∑ —Å—Ç–∏–∫–µ—Ä–æ–≤ –∫–∞—Ä—Ç—ã, —á—Ç–æ–±—ã —Ä–∞–∑—ã–≥—Ä–∞—Ç—å –µ—ë.\n\n"
    "üå≥ –ò–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.\n"
    "–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ —á—Ç–æ–±—ã –≤–∞–º –ø–æ–º–µ—à–∞–ª–∏, –∑–∞–∫—Ä–æ–π—Ç–µ –∫–æ–º–Ω–∞—Ç—É —á–µ—Ä–µ–∑ /close.\n"
    "–ß—Ç–æ–±—ã –ø–æ–∫–∏–Ω—É—Ç—å –∏–≥—Ä—É –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /leave.\n"
    "–ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –¥–æ–ª–≥–æ –¥—É–º–∞–µ—Ç. –µ–≥–æ –º–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π /skip.\n"
    "‚òï –û –ø—Ä–æ—á–∏—Ö –∫–æ–º–∞–Ω–¥–∞—Ö –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –≤ <b>–º–µ–Ω—é</b>.\n"
)

# –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ–± –∞–≤—Ç–æ—Ä—Å—Ç–≤–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–æ–≤–æ—Å—Ç–Ω–æ–º –∫–∞–Ω–∞–ª–µ
# –ü—Ä–æ—Å—Ç–æ –∫–∞–∫ –º–∏–Ω—É—Ç–∫–∞ —Ä–µ–∫–ª–∞–º—ã
STATUS_MESSAGE = (
    "üåü <b>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ</b>:\n\n"
    "üÉè <b>Maubot</b> - Telegram –±–æ—Ç —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π "
    "–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–≥—Ä–∞—Ç—å –≤ Uno —Å –¥—Ä—É–∑—å—è–º–∏ –≤ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö.\n"
    "–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ—Å—Ç—É–ø–µ–Ω –≤ "
    "<a href='https://codeberg.org/salormoont/maubot'>Codeberg</a>, –∞ —Ç–∞–∫–∂–µ –≤"
    "<a href='https://github.com/pentergust/maubot'>Github</a>.\n"
    "üçì –ú—ã –±—É–¥–µ–º –æ—á–µ–Ω—å —Ä–∞–¥—ã –≤–∞—à–µ <b>–ø–æ–¥–¥–µ—Ä–∂–∫–µ</b> –≤ —Ä–∞–∑–≤–∏—Ç–∏–µ –±–æ—Ç–∞.\n\n"
    "–£–∑–Ω–∞—Ç—å –æ –≤—Å–µ—Ö –±—É–¥—É—â–∏—Ö –ø–ª–∞–Ω–∞—Ö –≤—ã –º–æ–∂–µ—Ç–µ –≤ Telegram –∫–∞–Ω–∞–ª–µ "
    "<a href='https://t.me/mili_qlaster'>Salorhard</a>."
)

# –ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–Ω–∞—Ç—ã ------------------------------------------------------

# –ï—Å–ª–∏ –≤ –¥–∞–Ω–Ω–æ–º —á–∞—Ç–µ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω–æ –Ω–∏ –æ–¥–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã
NO_ROOM_MESSAGE = (
    "üëÄ –í –¥–∞–Ω–Ω–æ–º —á–∞—Ç–µ –µ—â—ë <b>–Ω–µ—Ç –∏–≥—Ä–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã</b>.\n"
    "üç∞ –í—ã –º–æ–∂–µ—Ç–µ <b>—Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é</b> –ø—Ä–∏ –ø–æ–º–æ—â–∏ –∫–æ–º–∞–Ω–¥—ã /game."
)

# –ö–æ–≥–¥–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è/–Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
NOT_ENOUGH_PLAYERS = (
    f"üå≥ <b>–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–≥—Ä–æ–∫–æ–≤</b> (–º–∏–Ω–∏–º—É–º {config.min_players}) –¥–ª—è "
    "–∏–≥—Ä—ã.\n"
    "–ï—Å–ª–∏ –∏–≥—Ä–∞ –µ—â—ë <b>–Ω–µ –Ω–∞—á–∞–ª–∞—Å—å</b> –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–æ–º–∞–Ω–¥–æ–π "
    "/join —á—Ç–æ–±—ã –∑–∞–π—Ç–∏ –≤ –∫–æ–º–Ω–∞—Ç—É.\n"
    "üç∞ –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É –ø—Ä–∏ –ø–æ–º–æ—â–∏ /game."
)


def get_closed_room_message(game: UnoGame) -> str:
    """–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –≤ –∑–∞–∫—Ä—ã—Ç—É—é –∫–æ–º–Ω–∞—Ç—É."""
    return (
        "üîí –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –¥–∞–Ω–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ <b>–∑–∞–∫—Ä—ã—Ç–∞</b>.\n"
        f"–í—ã –º–æ–∂–µ—Ç–µ –ø–æ–ø—Ä–æ—Å–∏—Ç—å {game.owner.name} –æ—Ç–∫—Ä—ã—Ç—å"
        "–∫–æ–º–Ω–∞—Ç—É –∏–ª–∏ –¥–æ–∂–¥–∞—Ç—å—Å—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä–∞."
    )


# –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
# =======================


def plural_form(n: int, v: tuple[str, str, str]) -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∫–ª–æ–Ω—ë–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —á–∏—Å–ª–∞.

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∫–ª–æ–Ω—ë–Ω–Ω–æ–µ —Å–ª–æ–≤–æ: "–¥–ª—è –æ–¥–Ω–æ–≥–æ", "–¥–ª—è –¥–≤—É—Ö",
    "–¥–ª—è –ø—è—Ç–∏" –∑–Ω–∞—á–µ–Ω–∏–π.
    """
    return v[2 if (4 < n % 100 < 20) else (2, 0, 1, 1, 1, 2)[min(n % 10, 5)]]  # noqa: PLR2004


def get_str_timedelta(seconds: int) -> str:
    """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–µ–∫—É–Ω–¥.

    –ú–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–ª–æ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏.
    """
    m, s = divmod(seconds, 60)
    if m == 0:
        return f"{s} {plural_form(m, ('—Å–µ–∫—É–Ω–¥—É', '—Å–µ–∫—É–Ω–¥—ã', '—Å–µ–∫—É–Ω–¥'))}"
    if s == 0:
        return f"{m} {plural_form(m, ('–º–∏–Ω—É—Ç—É', '–º–∏–Ω—É—Ç—ã', '–º–∏–Ω—É—Ç'))}"
    return (
        f"{m} {plural_form(m, ('–º–∏–Ω—É—Ç—É', '–º–∏–Ω—É—Ç—ã', '–º–∏–Ω—É—Ç'))} –∏ "
        f"{s} {plural_form(m, ('—Å–µ–∫—É–Ω–¥—É', '—Å–µ–∫—É–Ω–¥—ã', '—Å–µ–∫—É–Ω–¥'))}"
    )


def take_cards_message(game: UnoGame) -> str:
    """–°–∫–æ–ª—å–∫–æ –∫–∞—Ä—Ç –±–µ—Ä—ë—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å."""
    if not game.take_counter:
        return "üÉè –ë–µ—Ä—É –∫–∞—Ä—Ç—É."
    return (
        f"üÉè –ë–µ—Ä—É {game.take_counter} "
        f"{plural_form(game.take_counter, ('–∫–∞—Ä—Ç—É', '–∫–∞—Ä—Ç—ã', '–∫–∞—Ä—Ç'))}"
    )


# –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
#  =====================


def get_room_rules(game: UnoGame) -> str:
    """–ü–æ–ª—É—á–∞–µ—Ç –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.

    –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–∞–≤–∏–ª –∏ –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª.
    –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–±—Ä–∞–Ω–æ, —Ç–æ –≤–µ—Ä–Ω—ë—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É.
    """
    rule_list = ""
    active_rules = 0
    for rule in game.rules:
        if rule.status:
            active_rules += 1
            rule_list += f"\n- {rule.name}"

    if active_rules == 0:
        return ""
    return f"üî• –í—ã–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ {active_rules}:{rule_list}"


def get_all_room_players(game: UnoGame) -> str:
    """–°–æ–±–∏—Ä–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–≥—Ä—ã –±–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è –∫–∞—Ä—Ç –∏ —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–æ–º–Ω–∞—Ç–µ –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã, –ø–æ—Å–∫–æ–ª—å–∫—É —Ç—É—Ç –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å
    –∫—Ç–æ –Ω–∞—á–∞–ª –∏–≥—Ä—É, —Å–∫–æ–ª—å–∫–æ —É –∫–æ–≥–æ –∫–∞—Ä—Ç –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.

    –ï—Å–ª–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∫–æ–º–Ω–∞—Ç–µ –µ—â—ë –Ω–µ—Ç, –≤–µ—Ä–Ω—ë—Ç –º–∏–ª–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á—Ç–æ –≤ –∫–æ–º–Ω–∞—Ç–µ
    –µ—â—ë –ø—É—Å—Ç–æ.
    """
    if len(game.players) == 0:
        return "‚ú® –í –∫–æ–º–Ω–∞—Ç–µ –ø–æ–∫–∞ –Ω–∏–∫–æ–≥–æ –Ω–µ—Ç—É.\n"
    players_list = f"‚ú® –≤—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤ {len(game.players)}:\n"
    for player in game.players:
        players_list += f"- {player.name}\n"
    return players_list


def get_new_game_message(game: UnoGame) -> str:
    """–°–æ–æ–±—â–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã –≤ –∫–æ–º–Ω–∞—Ç–µ.

    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫—Ç–æ –ø–µ—Ä–≤—ã–º —Ö–æ–¥–∏—Ç, –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ
    —Ä–µ–∂–∏–º—ã –∏–≥—Ä—ã.
    """
    return (
        "üå≥ –î–∞ –Ω–∞—á–Ω—ë—Ç—Å—è <b>–ù–æ–≤–∞—è –∏–≥—Ä–∞!</b>!\n"
        f"‚ú® –ò –ø–µ—Ä–≤—ã–º —É –Ω–∞—Å —Ö–æ–¥–∏—Ç {game.player.name}\n"
        "/settings —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–∏—Ç—å –∏–≥—Ä–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞.\n"
        "/close —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å –∫–æ–º–Ω–∞—Ç—É –æ—Ç –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö.\n\n"
        f"{get_all_room_players(game)}\n"
        f"{get_room_rules(game)}"
    )


def get_room_status(game: UnoGame) -> str:
    """–û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç—ã.

    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã.
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã.

    –ï—Å–ª–∏ –∏–≥—Ä–∞ —É–∂–µ –Ω–∞—á–∞–ª–∞—Å—å, —Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å–∞–º–∞—è —Ä–∞–∑–Ω–∞ –ø–æ–ª–µ–∑–Ω–∞—è
    –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏–≥—Ä—ã.
    –ö–∞–∫ –º–∏–Ω–∏–º—É–º —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤, –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ–∂–∏–º—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç –∏ —Ç–∞–∫
    –¥–∞–ª–µ–µ.
    """
    if not game.started:
        return (
            f"‚òï –ù–æ–≤–∞—è <b>–ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞</b>!\n"
            f"ü™Ñ <b>–°–æ–∑–¥–∞—Ç–µ–ª—å</b>: {game.owner.name}\n\n"
            f"{get_all_room_players(game)}\n"
            "‚öôÔ∏è –ò–≥—Ä–æ–≤—ã–µ <b>–ø—Ä–∞–≤–∏–ª–∞</b> –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–¥–µ–ª–∞—Ç—å –∏–≥—Ä—É –±–æ–ª–µ–µ –≤–µ—Å—ë–ª–æ–π.\n"
            "- /settings –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª –∫–æ–º–Ω–∞—Ç—ã\n"
            "- /join —á—Ç–æ–±—ã –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ ‚ú®\n"
            "- /start –¥–ª—è –Ω–∞—á–∞–ª–∞ –≤–µ—Å–µ–ª—å—è!üç∞"
        )

    if game.rules.single_shotgun.status:
        shotgun_stats = f"üî´ <b>–†–µ–≤–æ–ª—å–≤–µ—Ä</b>: {game.shotgun_current} / 8"
    else:
        shotgun_stats = ""

    now = datetime.now()
    game_delta = get_str_timedelta(int((now - game.game_start).total_seconds()))
    turn_delta = get_str_timedelta(int((now - game.turn_start).total_seconds()))
    return (
        f"‚òï <b>–ò–≥—Ä–æ–≤–∞—è –∫–æ–º–Ω–∞—Ç–∞</b> {game.owner.name}:\n"
        f"üÉè <b>–ü–æ—Å–ª–µ–¥–Ω—è—è –∫–∞—Ä—Ç–∞</b>: {game.deck.top}\n"
        f"ü¶ù <b>–°–µ–π—á–∞—Å —Ö–æ–¥</b> {game.player.name} "
        f"(–ø—Ä–æ—à–ª–æ {turn_delta})\n\n"
        f"{get_room_players(game)}\n"
        f"{get_room_rules(game)}\n"
        f"‚è≥ <b>–ò–≥—Ä–∞ –∏–¥—ë—Ç</b> {game_delta}\n"
        f"üì¶ <b>–∫–∞—Ä—Ç</b> –≤ –∫–æ–ª–æ–¥–µ: {len(game.deck.cards)} –¥–æ—Å—Ç—É–ø–Ω–æ / "
        f"{len(game.deck.used_cards)} –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ.\n{shotgun_stats}"
    )
