"""–ò–≥—Ä–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞.

–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –∏–∑–º–µ–Ω—è—Ç—å—Å—è –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–≥—Ä—ã.
"""

from dataclasses import dataclass
from enum import IntEnum


class GameRules(IntEnum):
    """–ù–∞–±–æ—Ä –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª."""

    twist_hand = 1 << 0  # "ü§ù –û–±–º–µ–Ω –∫–∞—Ä—Ç–∞–º–∏
    rotate_cards = 1 << 1  # "üåÄ –ö—Ä—É–≥–æ–≤–æ–π –æ–±–º–µ–Ω
    one_winner = 1 << 2  # "üëë –û–¥–∏–Ω –ø–æ–±–µ–¥–∏—Ç–µ–ª—å
    auto_skip = 1 << 3  # "üí∏ –ê–≤—Ç–æ –ø—Ä–æ–ø—É—Å–∫
    take_until_cover = 1 << 4  # "üç∑ –ë–µ—Ä—É –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ
    shotgun = 1 << 5  # "üî´ –†–µ–≤–æ–ª—å–≤–µ—Ä
    deferred_take = 1 << 6  # "‚è≥ –û—Ç–ª–æ–∂–µ–Ω–Ω–æ–µ –≤–∑—è—Ç–∏–µ
    auto_choose_color = 1 << 7  # "üå∑ —Å–∞–º–æ—Ü–≤–µ—Ç
    random_color = 1 << 8  # "üé≤ –ö–∞–∫–æ–π —Ü–≤–µ—Ç
    side_effect = 1 << 9  # "üíé –ü–æ–±–æ—á–Ω—ã–π –≤—ã–±—Ä–æ—Å
    twist_hand_pass = 1 << 10  # "üëã –ë–µ–∑ –æ–±–º–µ–Ω–∞
    intervention = 1 << 11  # "üòà –í–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ üîß
    special_wild = 1 << 12  # "‚ù§Ô∏è –û—Å–æ–±–∞—è –¥–∏–∫–æ—Å—Ç—å


Rule = GameRules | int


@dataclass(slots=True)
class RuleSet:
    """–ù–∞–±–æ—Ä –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª."""

    state: int = 0

    def status(self, rule: Rule) -> bool:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤–∫–ª—é—á–µ–Ω–æ –ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ."""
        return (self.state & rule) != 0

    def toggle(self, rule: Rule) -> None:
        """–ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–∏—Ç–æ–≤–æ–≥–æ —Ñ–ª–∞–≥–∞."""
        self.state ^= rule
